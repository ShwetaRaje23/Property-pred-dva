{% load staticfiles %}
<!DOCTYPE html>
<html>
  <head>

  <link rel="stylesheet" href="{% static "css/custom.css"%}" />
  <link rel="stylesheet" href="{% static "css/foundation.css"%}" />
  <script src="{% static "js/vendor/modernizr.js"%}"></script>
  <script src="{% static "js/vendor/jquery.js"%}"></script>
  <script src="{% static "js/foundation.min.js"%}"></script>
    
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      html, body {
        height: 100%;
        margin: 0;

        padding: 0;
      }
      #map {
        height: 100%;
        width:50%;
        margin: 10px;
        padding: 100; 
      }
.controls {
  margin-top: 10px;
  border: 1px solid transparent;
  border-radius: 2px 0 0 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  height: 32px;
  outline: none;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}

#pac-input {
  background-color: #fff;
  font-family: Roboto;
  font-size: 15px;
  font-weight: 300;
  margin-left: 12px;
  padding: 0 11px 0 13px;
  text-overflow: ellipsis;
  width: 300px;
}

#pac-input:focus {
  border-color: #4d90fe;
}

.pac-container {
  font-family: Roboto;
}

#type-selector {
  color: #fff;
  background-color: #4d90fe;
  padding: 5px 11px 0px 11px;
}

#type-selector label {
  font-family: Roboto;
  font-size: 13px;
  font-weight: 300;
}

    </style>
    <title>Property Predictor</title>
    <style>
      #target {
        width: 345px;
      }
    </style>

  </head>


  <body>


<!-- Navigation bar for all the code required -->
<nav class="top-bar" data-topbar role="navigation">
  <ul class="title-area">
    <li class="name">
      <h1><a href="#">Property Predictor</a></h1>
    </li>
     <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
    <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
  </ul>

  <section class="top-bar-section">
    <!-- Right Nav Section -->
    <ul class="right">
      <li class="has-dropdown">
        <a href="signup">Sign Up</a>
        <ul class="dropdown">
        <li><a href="#">New User</a></li>        
          <li><a href="#">Settings</a></li>
          <li><a href="#">Logout</a></li>
          
        </ul>
      </li>
    </ul>

  </section>
</nav>

<!-- End of the navigation bar -->

<!-- <div style="width: 100%;"> -->
  
    <input style="width : 70%; margin: 10px" id="pac-input" class="controls" type="text" placeholder="Search Box">
    <div style="float:left; width: 50%" id="map"></div>
  

  <div style="float:left; margin: 10px">

  <!-- <form action="/startpp/" method="get"> -->
  <form>
  <!-- For price -->
    <fieldset style="width: 150%; height: 20%;">
    <legend>Price</legend>

  <div class="row">
    <div class="small-8">
      <div class="row">
      <!--   <div class="small-3 columns">
          <label for="right-label" class="right">Price</label>
        </div> -->
        <div style="width: 150%;">
          <input type="text" id="price_value" name="getprice" placeholder="Enter desired price">
        </div>

        <!-- <div class="row"> -->
          <div style="width: 500%;" class="large-6 columns">
            <label>Priority for results with this price (1 is least)</label>
          <input type="radio" name="pricepri" value="1" id="p1"><label for="p1">1</label>
          <input type="radio" name="pricepri" value="2" id="p2"><label for="p2">2</label>
          <input type="radio" name="pricepri" value="3" id="p3"><label for="p3">3</label>
          <input type="radio" name="pricepri" value="4" id="p4"><label for="p4">4</label>
          <input type="radio" name="pricepri" value="5" id="p5"><label for="p5">5</label>
    </div>
    <!-- </div> -->
    </div>
  </div>
   </fieldset>

   <!-- End of price fieldset -->


  <!-- For bedrooms -->
    <fieldset style="width: 150%; height: 20%;">
    <legend>Number of Bedrooms</legend>

  <div class="row">
    <div class="small-8">
      <div class="row">
      <!--   <div class="small-3 columns">
          <label for="right-label" class="right">Price</label>
        </div> -->
        <div style="width: 150%;">
          <input type="text" id="bedrooms" name="getbedroom" placeholder="Enter desired number of bedrooms">
        </div>

        <!-- <div class="row"> -->
          <div style="width: 500%;" class="large-6 columns">
            <label>Priority for results with number of bedrooms</label>
          <input type="radio" name="bedroom_pri" value="1" id="b1"><label for="b1">1</label>
          <input type="radio" name="bedroom_pri" value="2" id="b2"><label for="b2">2</label>
          <input type="radio" name="bedroom_pri" value="3" id="b3"><label for="b3">3</label>
          <input type="radio" name="bedroom_pri" value="4" id="b4"><label for="b4">4</label>
          <input type="radio" name="bedroom_pri" value="5" id="b5"><label for="b5">5</label>
    </div>
    <!-- </div> -->
    </div>
  </div>
   </fieldset>

   <!-- End of bedrooms fieldset -->


    <fieldset style="width: 150%; height: 20%;">
    <legend>Crime Rate</legend>
          <div style="width: 500%;" class="large-6 columns">
            <label>Priority for crime rate in the neighborhood</label>
          <input type="radio" name="crimepriority" value="1" id="c1"><label for="c1">1</label>
          <input type="radio" name="crimepriority" value="2" id="c2"><label for="c2">2</label>
          <input type="radio" name="crimepriority" value="3" id="c3"><label for="c3">3</label>
          <input type="radio" name="crimepriority" value="4" id="c4"><label for="c4">4</label>
          <input type="radio" name="crimepriority" value="5" id="c5"><label for="c5">5</label>
    </div>
    <!-- </div> -->
    </div>
  </div>
   </fieldset>

   <!-- End of crime fieldset -->
  
 <div class="row">
    <div class="large-6 large-centered columns">
<<<<<<< HEAD
    <!--a href="bubble">Click to Visualize</a-->
=======

    <!--a href="bubble">Click to Visualize</a-->



<<<<<<< HEAD
    <!-- <input id="buttonid" style="float:right;" type="submit" class="button round" value="Submit"/> -->
    <input id="buttonid" style="float:right;" type="submit" class="button round" value="Submit" />
=======
>>>>>>> 9580ee253eb065716d7ca2ae2f90a51e3e2cbd91
    <input style="float:right;" type="submit" class="button round" value="Submit" onclick=getDataFromForm();/>
>>>>>>> cd73e7317faf1be0ce0f321558dbe857cb978757
      
  </div>
<a href="bubble">Click to Visualize</a>
</div>





</form>
</div>
</div>
<!-- <div style="clear:both"></div> -->


<script>
// This example adds a search box to a map, using the Google Place Autocomplete
// feature. People can enter geographical searches. The search box will return a
// pick list containing a mix of places and predicted search terms.


// get data from the file and plot it on the map

function getDataToPlot(data){
  location_name = [];
  for (var i = 0; i < data.length; i++) {
    console.log( "data" + data[i])
    location_name[i] = data[i]
}
  return location_name
}



// {% autoescape off %}
//     data = JSON.parse('{{ results_json }}');
// {% endautoescape %}

// console.log(data)

// if its latitude and longitude 
// i = 0
// location_list = []
// for (var type in data){
//   i = i + 1
//   location_list[i] = data[type];
// }
       
// console.log(location_list);




//google.maps.event.addDomListener(window, 'load', initialize);

// function init(){
// var myLatLng = {lat: 33.343185, lng: -84.50844};

// var map = new google.maps.Map(document.getElementById('map'), {
//   zoom: 4,
//   center: myLatLng
// });

// var marker = new google.maps.Marker({
//   position: myLatLng,
//   map: map,
//   title: 'Hello World!'
// });
// }

// data = {"crime": "[{\"fields\": {\"location_lng\": \"33.720240000\", \"crime_type\": \"LARCENY-NON VEHICLE\", \"neighborhood\": \"South Atlanta\", \"location\": \"55 MCDONOUGH BLVD SW\", \"location_lat\": \"-84.386540000\"}, \"model\": \"startpp.citycrimedata\", \"pk\": 90360664}, {\"fields\": {\"location_lng\": \"33.720240000\", \"crime_type\": \"LARCENY-NON VEHICLE\", \"neighborhood\": \"South Atlanta\", \"location\": \"55 MCDONOUGH BLVD SW\", \"location_lat\": \"-84.386540000\"}, \"model\": \"startpp.citycrimedata\", \"pk\": 90150916}, {\"fields\": {\"location_lng\": \"33.720240000\", \"crime_type\": \"LARCENY-NON VEHICLE\", \"neighborhood\": \"South Atlanta\", \"location\": \"55 MCDONOUGH BLVD SW\", \"location_lat\": \"-84.386540000\"}, \"model\": \"startpp.citycrimedata\", \"pk\": 90701022}, {\"fields\": {\"location_lng\": \"33.720240000\", \"crime_type\": \"LARCENY-NON VEHICLE\", \"neighborhood\": \"South Atlanta\", \"location\": \"55 MCDONOUGH BLVD SW\", \"location_lat\": \"-84.386540000\"}, \"model\": \"startpp.citycrimedata\", \"pk\": 92510487}]", "prop_data": "[{\"fields\": {\"num_bedrooms\": 0, \"location_lng\": \"-84.387271000\", \"location_lat\": \"33.889725000\", \"location\": \"LONG ISLAND DR NW\", \"price_input\": \"542800.000000000\"}, \"model\": \"startpp.citypropertydata\", \"pk\": 1}]"};


// for (var j = 0; j < data.prop_data; ++j){
//   console.log(data.prop_data);

// }

// console.log(data.prop_data[0].fields)


// data_2 = JSON.parse(data);
// console.log(data_2);

var locations = [];
// document.getElementById('button').onclick = function(getdata) {
//    alert("button was clicked");
// }​;​
   

function getdata(){
  var locations = [  ['786 LOWNDES AVE SW', 33.733731, -84.411443],
['565 NORTHSIDE DR NW', 33.770637, -84.404733],
['823 BRIARCLIFF RD NE', 33.777124, -84.347312],
['2495 FERNLEAF CT NW', 33.82069, -84.439777],
['FERNLEAF PARK DR NW', 33.819361, -84.439239],
['1751 MADRONA ST NW', 33.768105, -84.437096],
['1623 MEMORIAL DR SE', 33.75928, -84.317174],
['2259 COTTAGE GROVE AVE SE', 33.750509, -84.317591],
['3414 HABERSHAM RD NW', 33.848163, -84.391107],
['3680 TUXEDO RD NW', 33.85462, -84.397174]];
}

// var locations = [  ['786 LOWNDES AVE SW', 33.733731, -84.411443],
// ['565 NORTHSIDE DR NW', 33.770637, -84.404733],
// ['823 BRIARCLIFF RD NE', 33.777124, -84.347312],
// ['2495 FERNLEAF CT NW', 33.82069, -84.439777],
// ['FERNLEAF PARK DR NW', 33.819361, -84.439239],
// ['1751 MADRONA ST NW', 33.768105, -84.437096],
// ['1623 MEMORIAL DR SE', 33.75928, -84.317174],
// ['2259 COTTAGE GROVE AVE SE', 33.750509, -84.317591],
// ['3414 HABERSHAM RD NW', 33.848163, -84.391107],
// ['3680 TUXEDO RD NW', 33.85462, -84.397174]];



function initAutocomplete () {

  //test location
  var myLatLng = {lat: 33.743185, lng: -84.30844};

  //test locations
  // var locations = [
  //           ['Georgia Tech', 33.343085, -84.305938],
  //               ['Peachtree street', 33.343085, -84.31244],
  //               ['XYZ street', 33.353085, -84.10844],
  //               ['Peachtree street', 33.323185, -84.50844]];


var locations = [  ['786 LOWNDES AVE SW', 33.733731, -84.411443],
['565 NORTHSIDE DR NW', 33.770637, -84.404733],
['823 BRIARCLIFF RD NE', 33.777124, -84.347312],
['2495 FERNLEAF CT NW', 33.82069, -84.439777],
['FERNLEAF PARK DR NW', 33.819361, -84.439239],
['1751 MADRONA ST NW', 33.768105, -84.437096],
['1623 MEMORIAL DR SE', 33.75928, -84.317174],
['2259 COTTAGE GROVE AVE SE', 33.750509, -84.317591],
['3414 HABERSHAM RD NW', 33.848163, -84.391107],
['3680 TUXEDO RD NW', 33.85462, -84.397174]];

  var map = new google.maps.Map(document.getElementById('map'), {

    //center it at Atlanta
    center: {lat: 33.7550, lng: -84.3900},
    zoom: 13,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });

  // Create the search box and link it to the UI element.
  var input = document.getElementById('pac-input');
  var searchBox = new google.maps.places.SearchBox(input);
  map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);

  // Bias the SearchBox results towards current map's viewport.
  map.addListener('bounds_changed', function() {
    searchBox.setBounds(map.getBounds());
  });


  var infoWindow = new google.maps.InfoWindow();
  var markers = [];


for (var i = 0; i < locations.length ; ++i) {
  var p = new google.maps.LatLng(locations[i][1], locations[i][2]);  
  var n = locations[i][0];  
  marker = new google.maps.Marker({
  position: p,
  map: map,
  // title: 'Hello World!'
  title: n
});

      google.maps.event.addListener(marker, "click", (function(marker, i) {
      return function() {
        infoWindow.setContent(
        "Information: " + locations[i][0]
        );
        infoWindow.open(map, marker);
      }    
    })(marker, i));
  
}

// markers.setMap(map);


  google.maps.event.addListener(map, 'click', function(event) {
    addMarker(event.latLng, map);
  });
  // [START region_getplaces]
  // Listen for the event fired when the user selects a prediction and retrieve
  // more details for that place.
  searchBox.addListener('places_changed', function() {
    var places = searchBox.getPlaces();

    // you can add a list of places here

    console.dir(places);

    places.forEach(function(place){
      console.log("printing places" + place.name + "location" + place.geometry.location)

    });

    if (places.length == 0) {
      return;
    }

    // Clear out the old markers.
    markers.forEach(function(marker) {
      marker.setMap(null);
    });
    markers = [];

    // For each place, get the icon, name and location.
    var bounds = new google.maps.LatLngBounds();
    places.forEach(function(place) {
      var icon = {
        url: place.icon,
        size: new google.maps.Size(71, 71),
        origin: new google.maps.Point(0, 0),
        anchor: new google.maps.Point(17, 34),
        scaledSize: new google.maps.Size(25, 25)
      };

      // Create a marker for each place.
      markers.push(new google.maps.Marker({
        map: map,
        icon: icon,
        title: place.name,
        position: place.geometry.location
      }));


      if (place.geometry.viewport) {
        // Only geocodes have viewport.
        bounds.union(place.geometry.viewport);
      } else {
        bounds.extend(place.geometry.location);
      }
    });
    map.fitBounds(bounds);
  });

  
  //[END region_getplaces]
}

   
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAv6uUX8ehQPd2WNAPcZxFQ_wk9tFF1zg4&libraries=places&callback=initAutocomplete"
         async defer></script>

    <script type="text/javascript">
     //google.maps.event.addDomListener(window, 'load', initialize);
     </script>
  </body>
</html>